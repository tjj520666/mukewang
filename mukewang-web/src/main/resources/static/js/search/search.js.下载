define(function(require,exports,module){module.exports={currIndex:-1,areaPanel:$(".search-history-area"),input:$(".js-search-ipt"),keyup:function(a){this.areaPanel.is("hidden")||(40==a&&(this.setCurrIndex("down"),this.itemSwitch()),38==a&&(this.setCurrIndex("up"),this.itemSwitch()))},setCurrIndex:function(a){var c=this.areaPanel.find(".li"),h=c.length;this.currIndex="up"===a?this.currIndex>-1?this.currIndex-1:h-1:this.currIndex<h-1?this.currIndex+1:-1},itemSwitch:function(){var a=this.areaPanel.find(".li"),c=null,h="";a.removeClass("active"),this.currIndex>-1&&(c=a.eq(this.currIndex),c.addClass("active"),h=c.find("a").html(),this.setTriggerValue(h))},setTriggerValue:function(a){this.input.val(a)},associative:function(a){var c=this;$.ajax({type:"GET",url:"/search/history?words="+a,dataType:"json",success:function(a){if(a.data.length>0){if(""==c.input.val())return;var h=c.searchAreaDom2(a.data);c.area.$area.html(h),c.area.show()}else c.area.hide()}})},words:function(){return OP_CONFIG.$words},location:function(a,c){"undefined"==typeof c&&(c=a,a=""),""==c&&(c=this.words()),location.href=this.returnUrl(a)+encodeURIComponent(c)},returnUrl:function(a){var c="";switch(a){case"index":c="/search/?words=";break;case"course":c="/search/course?";var h=$(".js-course-list>span").attr("class");if("sz"==h){var w=$(".js-order-list>span").attr("class");c+="type="+h,w&&(c+=w),c+="&"}c+="words=";break;case"wenda":c="/search/wenda?words=";break;case"article":c="/search/article?words=";break;case"wiki":c="/search/wiki?words=";break;default:c="/search/?words="}return c},getUrlQuery:function(a){var c=window.location.href,h=c.indexOf("?");if(-1!==h){for(var w=c.substring(h+1),v=w.split("&"),y="{",i=0;i<v.length;i++)y+='"'+v[i].replace("=",'":"')+'"';y+="}";var g=JSON.parse(y);return g[""+a]}},History:{is:!1,dom:""},searchAreaDom:function(a){var c="";c='<div style="padding: 0 24px 48px">',c+='<p class="search-history-words">最近搜索</p>';for(var i=0;i<a.length;i++)c+='<li><a href="/search/?words='+a[i].word+'">'+a[i].word+"</a></li>";return c+="</div>"},searchAreaDom2:function(a){for(var c="",i=0;i<a.length;i++)c+='<div class="li"><a href="javascript:;">'+a[i].word+"</a></div>";return c},setSearchHistory:function(){var a=this,c=$(".js-search-history");return isLogin?a.History.is?(c.html(a.History.dom),void c.show()):void this.getSearchHistory(function(h){if(h.data.length>0){var w=a.searchAreaDom(h.data);c.html(w),c.show(),a.History.is=!0,a.History.dom=w}}):!1},area:{$area:$(".js-search-history"),show:function(){this.$area.show()},hide:function(){this.$area.hide()}},getSearchHistory:function(a){$.ajax({type:"GET",url:"/index/searchhistory",dataType:"json",success:function(c){a&&a(c)}})}}});