define(["pay/common/js/cookie","moco"],function(t){var a=function(){var t=$(".js-toggle-coupon"),a=$(".coupon-list");0!=t.length&&t.on("click",function(){var t=$(this);t.hasClass("on")?(t.removeClass("on"),a.stop().slideUp(100)):(t.addClass("on"),a.stop().slideDown(100))})};a();var o=function(){this.Cookie=t};return $.extend(o.prototype,{courseNum:function(){var t=$(".js-item-cart").length;$(".js-coures-num").html(t);var a=$("#js-cart-body-table").find(".imv2-checkbox"),o=a.length;$(".js-choice-num").html(o);var e=0;a.each(function(){e+=parseFloat($(this).attr("data-price"))}),$(".jsAltogether").html(e.toFixed(2))},toggle:function(t,a,o){t.hasClass("imv2-checkbox")?(t.removeClass("imv2-checkbox").addClass("imv2-checkbox_onk"),a&&a()):(t.removeClass("imv2-checkbox_onk").addClass("imv2-checkbox"),o&&o()),this.courseNum()},removeItem:function(t){var a=$(t),o=a.data("typeid"),e=a.data("type"),s=a.data("goodsid"),c=(a.data("price"),{type_id:o,type:e,goods_id:s});$.ajax({url:"//order.imooc.com/pay/delcartgoods",dataType:"jsonp",data:c,jsonp:"jsonpcallback",success:function(t){if("0"==t.result){a.remove();var o=$("#js-cart-body-table").find(".js-item-cart").length;if(0==o)$(".js-cart-num").attr("data-cartnum",0).html("").hide(),$("#cartBody").html("<p class='notdata'>购物车内空空如也</p>"),$(".js-number-box-cart").html("").hide();else{Cart.courseNum();var e=$(".js-number-box-cart"),s=parseInt(e.find(".js-coures-num").html());$(".js-cart-num").attr("data-cartnum",s).html(s)}}else $.alert(t.msg)}})},submitOrderData:function(){var t=[],a=$("#js-cart-body-table .js-check");return $.each(a,function(){if($(this).hasClass("imv2-checkbox")){var a=$(this).parents(".js-item-cart");t.push(a.attr("data-goodsid"))}}),t}}),new o});